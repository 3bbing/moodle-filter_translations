{"version":3,"sources":["../src/translation_button.js"],"names":["define","$","ModalFactory","Str","templates","translation_button","on","opentranslation","clickedbutton","context","decodeURIComponent","data","replace","get_strings","key","component","then","langStrings","render","done","html","create","title","body","type","types","ALERT","modal","show","fail","Notification","exception"],"mappings":"AAwBAA,OAAM,0CAAC,CAAC,QAAD,CAAW,oBAAX,CAAiC,UAAjC,CAA6C,gBAA7C,CAAD,CAAiE,SAAUC,CAAV,CAAaC,CAAb,CAA2BC,CAA3B,CAAgCC,CAAhC,CAA2C,CAC9G,GAAIC,CAAAA,CAAkB,CAAG,CACrB,KAAQ,eAAY,CAChBJ,CAAC,CAAC,MAAD,CAAD,CAAUK,EAAV,CAAa,OAAb,CAAsB,oCAAtB,CAA4DD,CAAkB,CAACE,eAA/E,CACH,CAHoB,CAIrB,gBAAmB,0BAAY,IACvBC,CAAAA,CAAa,CAAGP,CAAC,CAAC,IAAD,CADM,CAUvBQ,CAAO,CAAG,CACV,QAAWC,kBAAkB,CAACF,CAAa,CAACG,IAAd,CAAmB,SAAnB,EAA8BC,OAA9B,CAAsC,KAAtC,CAA6C,GAA7C,CAAD,CADnB,CAEV,oBAAuBJ,CAAa,CAACG,IAAd,CAAmB,SAAnB,CAFb,CAGV,cAAiBH,CAAa,CAACG,IAAd,CAAmB,eAAnB,CAHP,CAIV,UAAaH,CAAa,CAACG,IAAd,CAAmB,WAAnB,CAJH,CAKV,cAAiBH,CAAa,CAACG,IAAd,CAAmB,eAAnB,CALP,CAMV,iBAAoBH,CAAa,CAACG,IAAd,CAAmB,kBAAnB,CANV,CAVa,CAmB3BR,CAAG,CAACU,WAAJ,CAhBW,CACP,CACIC,GAAG,CAAE,oBADT,CAEIC,SAAS,CAAE,qBAFf,CADO,CAgBX,EAAsBC,IAAtB,CAA2B,SAAUC,CAAV,CAAuB,CAC9C,MAAOb,CAAAA,CAAS,CAACc,MAAV,CAAiB,iDAAjB,CAAoET,CAApE,EAA6EU,IAA7E,CAAkF,SAAUC,CAAV,CAAgB,CACrGlB,CAAY,CAACmB,MAAb,CAAoB,CAChBC,KAAK,CAAEL,CAAW,CAAC,CAAD,CADF,CAEhBM,IAAI,CAAEH,CAFU,CAGhBI,IAAI,CAAEtB,CAAY,CAACuB,KAAb,CAAmBC,KAHT,CAApB,EAIGV,IAJH,CAIQ,SAAUW,CAAV,CAAiB,CACrBA,CAAK,CAACC,IAAN,EACH,CAND,CAOH,CARM,CASV,CAVD,EAUGC,IAVH,CAUQC,YAAY,CAACC,SAVrB,CAWH,CAlCoB,CAAzB,CAqCA,MAAO1B,CAAAA,CACV,CAvCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package filter_translations\n * @author Andrew Hancox <andrewdchancox@googlemail.com>\n * @author Open Source Learning <enquiries@opensourcelearning.co.uk>\n * @link https://opensourcelearning.co.uk\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @copyright 2021, Andrew Hancox\n */\n\ndefine(['jquery', 'core/modal_factory', 'core/str', 'core/templates'], function ($, ModalFactory, Str, templates) {\n    var translation_button = {\n        'init': function () {\n            $('body').on('click', '.filter_translations_btn_translate', translation_button.opentranslation);\n        },\n        'opentranslation': function () {\n            var clickedbutton = $(this);\n\n            var keys = [\n                {\n                    key: 'translationdetails',\n                    component: 'filter_translations'\n                },\n            ];\n\n            var context = {\n                'rawtext': decodeURIComponent(clickedbutton.data('rawtext').replace(/\\+/g, ' ')),\n                'rawtext_unprocessed': clickedbutton.data('rawtext'),\n                'generatedhash': clickedbutton.data('generatedhash'),\n                'foundhash': clickedbutton.data('foundhash'),\n                'translationid': clickedbutton.data('translationid'),\n                'dirtytranslation': clickedbutton.data('dirtytranslation')\n            };\n\n            Str.get_strings(keys).then(function (langStrings) {\n                return templates.render('filter_translations/translationdetailsmodalbody', context).done(function (html) {\n                    ModalFactory.create({\n                        title: langStrings[0],\n                        body: html,\n                        type: ModalFactory.types.ALERT\n                    }).then(function (modal) {\n                        modal.show();\n                    });\n                });\n            }).fail(Notification.exception);\n        }\n    };\n\n    return translation_button;\n});\n"],"file":"translation_button.min.js"}